- hosts : todos
  convertirse en : verdadero
  usuario_remoto : root

  vars :
    ÚLTIMA VEZ : " 0.21 "
    ÚLTIMA CONSTRUCCIÓN : " 1 "
    GPGKEY : " https://www.redhat.com/security/data/fd431d51.txt "

  tareas :

    - nombre : valida la distribución (CentOS u Oracle Linux)
      meta : end_host
      cuando : ansible_distribution! = 'CentOS' y ansible_distribution! = 'OracleLinux'

    - nombre : Validar versión de lanzamiento (6.10, 7.9, 8.4)
      meta : end_host
      when : ansible_distribution_version! = '6.10' y ansible_distribution_version! = '7.9' y ansible_distribution_version! = '8.4'

    - nombre : Descarga la clave GPG de Red Hat
      get_url :
        url : " {{GPGKEY}} "
        dest : " / etc / pki / rpm-gpg / RPM-GPG-KEY-redhat-release "

    - nombre : Agregar archivo de repetición Convert2RHEL
      yum_repository :
        nombre : convert2rhel
        descripción : Convert2RHEL para SO {{ansible_distribution_major_version}}
        baseurl : " http://ftp.redhat.com/pub/redhat/convert2rhel/ {{ansible_distribution_major_version}} / os / "
        habilitado : si
        gpgcheck : sí
        gpgkey : " archivo: /// etc / pki / rpm-gpg / RPM-GPG-KEY-redhat-release "

    - nombre : Instale convert2rhel para RHEL {{ansible_distribution_major_version}} desde el repositorio de yum
      mmm :
        nombre : " convert2rhel "
        estado : último
